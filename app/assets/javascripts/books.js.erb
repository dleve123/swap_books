$(document).ready(function() {

	// ALL SEARCH SHIT

	var substringMatcher = function(strs) {
		return function findMatches(q, cb) {
			var matches, substrRegex;

		// an array that will be populated with substring matches
		matches = [];

		// regex used to determine if a string contains the substring `q`
		substrRegex = new RegExp(q, 'i');

		// iterate through the pool of strings and for any string that
		// contains the substring `q`, add it to the `matches` array
		$.each(strs, function(i, str) {
			if (substrRegex.test(str)) {
			// the typeahead jQuery plugin expects suggestions to a
			// JavaScript object, refer to typeahead docs for more info
			matches.push({ value: str });
		}
	});

		cb(matches);
	};
};

var books= $('#books').data('url')
var names=[];
for(var key=0; key < books.length; key++)
{
	names.push(books[key].name)
}

$('#the-basics .typeahead').typeahead({
	hint: true,
	highlight: true,
	minLength: 1
},
{
	name: 'names',
	displayKey: 'value',
	source: substringMatcher(names)
});

	// EVERYTHING ELSE

	// Handles close button on product search
	$('.prod-search-close-btn').click( function() {
		$('.filled-prod').hide();
		$('.empty-prod').show();
	});

	$('#book-search').keypress(function (event) {
		if (event.which == 13) {
			// SEARCH FUNCTION HERE
			$('.filled-prod').show();
			$('.empty-prod').hide();
		}
	});

	$('.book-search-btn').click( function() {
		$('.filled-prod').show();
		$('.empty-prod').hide();
	});

	$('.btn-lock-in').click(function() {
		alert('worked');
		$('#myModal').modal();
		$('.datepicker').datepicker();
	});

});

var myBooks = [ {name: 'Calculus 1: Early Transcendentals', isbn: 123455, author: 'Bill Engvall', url: 'calc1.gif', isBuying: false, newNotif: false},
{name: 'Physics: For the faint of heart', isbn: 13333333333, author: 'Noah Presdick', url: 'phys1.gif', isBuying: true, newNotif: true}
];

var app = angular.module('myBooksApp', []);

app.controller('myBooksController', function($scope, $http) {

	$scope.myBooks = myBooks;

});


